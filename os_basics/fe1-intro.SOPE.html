<!--?xml version="1.0" encoding="UTF-8"?-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <title></title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
</head>

<body>
<h3 class="tit"><a href="https://sigarra.up.pt/feup/pt/ucurr_geral.ficha_uc_view?pv_ocorrencia_id=459478">2020/2021</a>:
Sistemas Operativos (<span style="font-style: italic;">Operating
Systems</span>) - 2º <a href="http://sigarra.up.pt/feup/cursos_geral.formview?p_cur_sigla=MIEIC">MIEIC</a></h3>

<h3 align="right">8.feb.2021</h3>

<h2 align="center">Exercise Sheet 1</h2>

<h3>Basics of Operating Systems and Unix programming</h3>
<ol>
  <li>«<em>The <code>make</code> program is an interpreter of special programs
    (makefiles), that can only be used in Linux and just for compiling C source
    code.</em>» 
    <ul style="list-style-type: lower-alpha;">
      <li>Is this true?</li>
      <li>The compilation lines of the <em>makefile</em> used in the
        "Interesting examples of compilations" have the option
        <code>-Wall</code>. Write a simple program that shows the importance of
        using that compiler option.</li>
      <li>Prepare a <em>makefile</em> for easing the compilation of the
        programs suggested in this Exercise Sheet. </li>
    </ul>
  </li>
  <li>Present both an advantage and a disadvantage of <em>dynamic linking</em>
    programs over <em>static linking</em>.</li>
  <li>Study the man page of the service <code>atexit</code>. 
    <ul style="list-style-type: lower-alpha;">
      <li>Could this service be useful when a running program is suddenly
        terminated (e.g. by <code>CTRL-C</code>)?</li>
      <li>Try it with a slightly adapted code presented in the
        <code>man</code>'s <code>EXAMPLE</code> section.</li>
    </ul>
  </li>
  <li><a href="#L401">*</a>[Study the implementation of the <code>read()</code>
    system call, trying to see if if is compatible with the scheme presented in
    the classes' sheets. For that, write a mini-program with just that system
    call, compile it perhaps with static linking and inspect the disassembled
    code of the executable with <code>objdump</code> (<code>man
    objdump</code>!...).]</li>
  <li>What are "command line arguments" and "environment variables"? 
    <ul style="list-style-type: lower-alpha;">
      <li>Write a program that outputs to the screen its command line arguments
        and the name and value of all the shell's environment variables.</li>
      <li>Change the program so that its output is just the value of the
        environment variables whose names are passed as arguments (e.g.
        <code>prog PATH HOME</code> would show the values of <code>PATH</code>
        and <code>HOME</code>). Confirm that the values output are correct
        using the shell commands <code>echo</code> and
      <code>printenv</code>.</li>
      <li>From the command line create a new environment variable,
        <code>DIR1</code>, with value <code>123-testing</code> and use the
        program you wrote in b. to confirm the existence and value of DIR1.</li>
    </ul>
  </li>
  <li>A system call may fail; by words, exemplify that with <code>open</code>.
    (If necessary: <code>man 2 open</code> !) 
    <ul style="list-style-type: lower-alpha;">
      <li>Write a program that tries to open a file named in the command line
        argument and report the "<code>open</code>" failures without using
        <code>perror</code>. With the program prove the example of failure you
        gave above.</li>
      <li>Modify your program to ensure that failure messages are output to the
        <em>standard error</em> (<code>stderr</code>) and not to the
        <em>standard output</em> (<code>stdout</code>). Confirm your new
        program behavior with <em>shell</em> redirection. (Clue: <code>prog
        &gt; ofile 2&gt; efile</code>)</li>
      <li>Repeat a. using <code>perror</code>. Test <code>stdout</code> and
        <code>stderr</code> for the output of this program.</li>
    </ul>
  </li>
  <li>Explain the two main functions of an operating system.</li>
  <li>Based on the output of the command <code>ps aux</code> say if Linux is 
    <ul style="list-style-type: lower-roman;">
      <li>multi-programming</li>
      <li>multi-user</li>
      <li>time sharing</li>
      <li>(cannot say just by the output)</li>
    </ul>
  </li>
  <li>Some system operations can be performed while in <em>user mode</em>,
    others only in <em>kernel mode</em>. 
    <ul style=" list-style-type: lower-alpha;">
      <li>using the <code>date</code> command classify, in the above respect,
        the read and write operations on the internal clock. (Clue: <code>date
        -s "20220913"</code>)</li>
      <li>name one (more) operation that can only be performed in <em>kernel
        mode</em>.</li>
    </ul>
  </li>
  <li>Write a program that outputs "<code>Hello world!</code>" 100 000 times
    and, before ending, presents the duration time of the running and of the
    processor usage (both in user and system modes). (Clue: "<code>time ls -R
    /tmp</code>".)</li>
  <li>Think of a program that copies the content of a file to another file,
    both named as program arguments (e.g. <code>prog fname1 fname2</code>).
    Write such a program using: 
    <ul style="list-style-type: lower-alpha;">
      <li>mainly (direct) system calls, such as <code>open</code>;</li>
      <li>mainly C library calls, such as <code>fopen</code>.</li>
      <li>Change one of those programs so that when the 2nd argument is missing
        (<code>fname2</code>, in the example above) the content of
        <code>fname1</code> is shown on the screen (i.e.
      <code>stdout</code>).</li>
    </ul>
  </li>
  <li>Think of a program that writes to the <em>standard output</em> the name
    and size of all the regular files in a directory whose name is given as
    argument (e.g. <code>prog dirname</code>). 
    <ul style="list-style-type: lower-alpha;">
      <li>Write such a program, also assuring one output line per file.</li>
      <li>From the output of the program and using <code>wc</code> show the
        number of regular files in the directory.</li>
    </ul>
  </li>
  <li>... (additional exercises on Moodle for people with free time)</li>
</ol>

<p><a name="L401" id="L401">*</a> just for the most curious... :-)</p>


</body></html>